---
title: "Mastering Shiny"
output:
  pdf_document:
    number_sections: true
    latex_engine: pdflatex
---

[Wickham, H. (2021). Mastering shiny. O'Reilly Media, Inc.](https://mastering-shiny.org/)

```{r, eval=knitr::is_html_output(), echo=FALSE}
knitr::asis_output('[Download summary](mastering_shiny.pdf)')
```

# Your First Shiny App

# Basic UI

# Basic Reactivity

# Case Study: ER Injuries

# Workflow

1. Development

    - Type *shinyapp* in .R file to insert Shiny app snippet
   
    - Keyboard shortcut to run the app: *Ctrl+Shift+Enter*
    
    - Relaunch app after every save with background job: 
    
       1. add script `shiny-run.R` to folder with `app.R`:
       
         ```{r, eval = FALSE}
         options(shiny.autoreload = TRUE)
         shiny::runApp()
         ```
         
       2. with active `shiny-run.R`, RStudio > Tools > Background Jobs > Start Background Job
       
       3. copy URL from Jobs pane and run `rstudioapi::viewer("<URL>")`

2. Debugging

    - Shiny automatically prints the traceback to the console
    
    - Use interactive debugger with `browser()` in source
    
    - Use `message()` (with `glue::glue()`) or `str()` calls to understand when a part of the code is evaluated and to show values
    
    - Getting help: make a reprex (minimal reproducible example)

# Layout, Themes, HTML

# Graphics 

interactive graphics `plotOutput("id", click = "plot_click")` in ui makes coordinates `input$plot_click` available in server

use `req()` to avoid app action before user input

use `nearPoints(<dataset>, input$plot_click)` to get points near to the click

can also use `dblclick`, `hover`, and `brush` (together with `brushedPoints()` helper) argument

can modify a plot interactively with `reactiveVal()`
